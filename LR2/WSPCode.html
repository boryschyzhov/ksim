<pre><font color="#007f69">globals</font><font color="#000000"> [ max-sheep ]  </font><font color="#787878">; don't let the sheep population grow too large</font><font color="#000000"><br /><br /></font><font color="#787878">; Sheep and wolves are both breeds of turtles</font><font color="#000000"><br /></font><font color="#660096">breed</font><font color="#000000"> [ sheep a-sheep ]  </font><font color="#787878">; sheep is its own plural, so we use &quot;a-sheep&quot; as the singular</font><font color="#000000"><br /></font><font color="#660096">breed</font><font color="#000000"> [ wolves wolf ]<br /><br /></font><font color="#007f69">turtles-own</font><font color="#000000"> [ energy ]       </font><font color="#787878">; both wolves and sheep have energy</font><font color="#000000"><br /><br /></font><font color="#007f69">patches-own</font><font color="#000000"> [ countdown ]    </font><font color="#787878">; this is for the sheep-wolves-grass model version</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup<br />  </font><font color="#0000aa">clear-all</font><font color="#000000"><br />  </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">netlogo-web?</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> max-sheep </font><font color="#963700">10000</font><font color="#000000"> ] [ </font><font color="#0000aa">set</font><font color="#000000"> max-sheep </font><font color="#963700">30000</font><font color="#000000"> ]<br /><br />  </font><font color="#787878">; Check model-version switch</font><font color="#000000"><br />  </font><font color="#787878">; if we're not modeling grass, then the sheep don't need to eat to survive</font><font color="#000000"><br />  </font><font color="#787878">; otherwise each grass' state of growth and growing logic need to be set up</font><font color="#000000"><br />  </font><font color="#0000aa">ifelse</font><font color="#000000"> model-version </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;sheep-wolves-grass&quot;</font><font color="#000000"> [<br />    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [<br />      </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> [ </font><font color="#963700">green</font><font color="#000000"> </font><font color="#963700">brown</font><font color="#000000"> ]<br />      </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"><br />        [ </font><font color="#0000aa">set</font><font color="#000000"> countdown grass-regrowth-time ]<br />      [ </font><font color="#0000aa">set</font><font color="#000000"> countdown </font><font color="#660096">random</font><font color="#000000"> grass-regrowth-time ] </font><font color="#787878">; initialize grass regrowth clocks randomly for brown patches</font><font color="#000000"><br />    ]<br />  ]<br />  [<br />    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"> ]<br />  ]<br /><br />  create-sheep initial-number-sheep  </font><font color="#787878">; create the sheep, then initialize their variables</font><font color="#000000"><br />  [<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000">  </font><font color="#963700">&quot;sheep&quot;</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">white</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">1.5</font><font color="#000000">  </font><font color="#787878">; easier to see</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label-color</font><font color="#000000"> </font><font color="#963700">blue</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> energy </font><font color="#660096">random</font><font color="#000000"> (</font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> sheep-gain-from-food)<br />    </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"><br />  ]<br /><br />  create-wolves initial-number-wolves  </font><font color="#787878">; create the wolves, then initialize their variables</font><font color="#000000"><br />  [<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;wolf&quot;</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">size</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">  </font><font color="#787878">; easier to see</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> energy </font><font color="#660096">random</font><font color="#000000"> (</font><font color="#963700">2</font><font color="#000000"> </font><font color="#660096">*</font><font color="#000000"> wolf-gain-from-food)<br />    </font><font color="#0000aa">setxy</font><font color="#000000"> </font><font color="#660096">random-xcor</font><font color="#000000"> </font><font color="#660096">random-ycor</font><font color="#000000"><br />  ]<br />  display-labels<br />  </font><font color="#0000aa">reset-ticks</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> go<br />  </font><font color="#787878">; stop the model if there are no wolves and no sheep</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [ </font><font color="#0000aa">stop</font><font color="#000000"> ]<br />  </font><font color="#787878">; stop the model if there are no wolves and the number of sheep gets very large</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> wolves </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> sheep </font><font color="#660096">&gt;</font><font color="#000000"> max-sheep [ </font><font color="#0000aa">user-message</font><font color="#000000"> </font><font color="#963700">&quot;The sheep have inherited the earth&quot;</font><font color="#000000"> </font><font color="#0000aa">stop</font><font color="#000000"> ]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> sheep [<br />    move-sheep<br /><br />    </font><font color="#787878">; in this version, sheep eat grass, grass grows, and it costs sheep energy to move</font><font color="#000000"><br />    </font><font color="#0000aa">if</font><font color="#000000"> model-version </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;sheep-wolves-grass&quot;</font><font color="#000000"> [<br />      </font><font color="#0000aa">set</font><font color="#000000"> energy energy </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">  </font><font color="#787878">; deduct energy for sheep only if running sheep-wolves-grass model version</font><font color="#000000"><br />      eat-grass  </font><font color="#787878">; sheep eat grass only if running the sheep-wolves-grass model version</font><font color="#000000"><br />      death </font><font color="#787878">; sheep die from starvation only if running the sheep-wolves-grass model version</font><font color="#000000"><br />    ]<br /><br />    reproduce-sheep  </font><font color="#787878">; sheep reproduce at a random rate governed by a slider</font><font color="#000000"><br />  ]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> wolves [<br />    look-around-wolf<br />    move-wolf<br />    </font><font color="#0000aa">set</font><font color="#000000"> energy energy </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">  </font><font color="#787878">; wolves lose energy as they move</font><font color="#000000"><br />    eat-sheep </font><font color="#787878">; wolves eat a sheep on their patch</font><font color="#000000"><br />    death </font><font color="#787878">; wolves die if they run out of energy</font><font color="#000000"><br />    reproduce-wolves </font><font color="#787878">; wolves reproduce at a random rate governed by a slider</font><font color="#000000"><br />  ]<br /><br />  </font><font color="#0000aa">if</font><font color="#000000"> model-version </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;sheep-wolves-grass&quot;</font><font color="#000000"> [ </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> [ grow-grass ] ]<br /><br />  </font><font color="#0000aa">tick</font><font color="#000000"><br />  display-labels<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> move-sheep<br />  <br />  </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> wolves-on </font><font color="#660096">neighbors</font><font color="#000000"> [<br />  <br />    </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#963700">180</font><font color="#000000"><br />    </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />  ]<br />  [<br />    </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000"><br />    </font><font color="#0000aa">lt</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000"><br />    </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> look-around-wolf<br />  </font><font color="#0000aa">let</font><font color="#000000"> candidate-patches </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">in-radius</font><font color="#000000"> vision-radius </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">any?</font><font color="#000000"> sheep-here </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> wolves-here ]<br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> candidate-patches [<br />    <br />    </font><font color="#0000aa">let</font><font color="#000000"> nearest-min </font><font color="#660096">min</font><font color="#000000"> [ </font><font color="#660096">distance</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000"> ] </font><font color="#660096">of</font><font color="#000000"> candidate-patches<br />    </font><font color="#0000aa">let</font><font color="#000000"> nearest-patches candidate-patches </font><font color="#660096">with</font><font color="#000000"> [ </font><font color="#660096">distance</font><font color="#000000"> </font><font color="#660096">myself</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> nearest-min ]<br />    </font><font color="#0000aa">face</font><font color="#000000"> </font><font color="#660096">one-of</font><font color="#000000"> nearest-patches<br />  ]<br />  <br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> move-wolf<br />  <br />  </font><font color="#0000aa">ifelse</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> wolves-here </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [<br />    </font><font color="#0000aa">stop</font><font color="#000000">     ]<br />[<br />  <br />  </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000"><br />  </font><font color="#0000aa">lt</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">50</font><font color="#000000"><br />  </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> eat-grass  </font><font color="#787878">; sheep procedure</font><font color="#000000"><br />  </font><font color="#787878">; sheep eat grass and turn the patch brown</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"> [<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">brown</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> energy energy </font><font color="#660096">+</font><font color="#000000"> sheep-gain-from-food  </font><font color="#787878">; sheep gain energy by eating</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> reproduce-sheep  </font><font color="#787878">; sheep procedure</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> sheep-reproduce [  </font><font color="#787878">; throw &quot;dice&quot; to see if you will reproduce</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> energy (energy </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">)                </font><font color="#787878">; divide energy between parent and offspring</font><font color="#000000"><br />    </font><font color="#0000aa">hatch</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [ </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000"> </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ]   </font><font color="#787878">; hatch an offspring and move it forward 1 step</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> reproduce-wolves  </font><font color="#787878">; wolf procedure</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> wolf-reproduce [  </font><font color="#787878">; throw &quot;dice&quot; to see if you will reproduce</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> energy (energy </font><font color="#660096">/</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000">)               </font><font color="#787878">; divide energy between parent and offspring</font><font color="#000000"><br />    </font><font color="#0000aa">hatch</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> [ </font><font color="#0000aa">rt</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">360</font><font color="#000000"> </font><font color="#0000aa">fd</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ]  </font><font color="#787878">; hatch an offspring and move it forward 1 step</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> eat-sheep<br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> sheep-here [<br />    </font><font color="#0000aa">let</font><font color="#000000"> target </font><font color="#660096">one-of</font><font color="#000000"> sheep-here<br />    </font><font color="#0000aa">if</font><font color="#000000"> sheep-counter [<br />      </font><font color="#0000aa">if</font><font color="#000000"> (</font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000">) </font><font color="#660096">&lt;</font><font color="#000000"> counter-chance [<br />        </font><font color="#0000aa">ask</font><font color="#000000"> target [ </font><font color="#0000aa">die</font><font color="#000000"> ]  <br />        </font><font color="#0000aa">die</font><font color="#000000">                 <br />        </font><font color="#0000aa">stop</font><font color="#000000"><br />      ] <br />    ]<br />    </font><font color="#0000aa">ask</font><font color="#000000"> target [ </font><font color="#0000aa">die</font><font color="#000000"> ]<br />    </font><font color="#0000aa">set</font><font color="#000000"> energy energy </font><font color="#660096">+</font><font color="#000000"> wolf-gain-from-food<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> death  </font><font color="#787878">; turtle procedure (i.e. both wolf and sheep procedure)</font><font color="#000000"><br />  </font><font color="#787878">; when energy dips below zero, die</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> energy </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> [ </font><font color="#0000aa">die</font><font color="#000000"> ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> grow-grass  </font><font color="#787878">; patch procedure</font><font color="#000000"><br />  </font><font color="#787878">; countdown on brown patches: if you reach 0, grow some grass</font><font color="#000000"><br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">brown</font><font color="#000000"> [<br />    </font><font color="#0000aa">ifelse</font><font color="#000000"> countdown </font><font color="#660096">&lt;=</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"><br />      [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"><br />        </font><font color="#0000aa">set</font><font color="#000000"> countdown grass-regrowth-time ]<br />      [ </font><font color="#0000aa">set</font><font color="#000000"> countdown countdown </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> ]<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> grass<br />  </font><font color="#0000aa">ifelse</font><font color="#000000"> model-version </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;sheep-wolves-grass&quot;</font><font color="#000000"> [<br />    </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000">]<br />  ]<br />  [ </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> display-labels<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000"> [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label</font><font color="#000000"> </font><font color="#963700">&quot;&quot;</font><font color="#000000"> ]<br />  </font><font color="#0000aa">if</font><font color="#000000"> show-energy? [<br />    </font><font color="#0000aa">ask</font><font color="#000000"> wolves [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label</font><font color="#000000"> </font><font color="#660096">round</font><font color="#000000"> energy ]<br />    </font><font color="#0000aa">if</font><font color="#000000"> model-version </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">&quot;sheep-wolves-grass&quot;</font><font color="#000000"> [ </font><font color="#0000aa">ask</font><font color="#000000"> sheep [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">label</font><font color="#000000"> </font><font color="#660096">round</font><font color="#000000"> energy ] ]<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#787878">; Copyright 1997 Uri Wilensky.</font><font color="#000000"><br /></font><font color="#787878">; See Info tab for full copyright and license.</font>
</pre>
